{"ast":null,"code":"var _jsxFileName = \"/Users/kimberlyzhu/Documents/MeetingGround/src/pages/submitInfo.tsx\";\n\n/*users.jsx*/\nimport useForm from \"react-hook-form\";\n//You have to use the link component to link between you pages\nimport styled from \"@emotion/styled\";\nimport logo from \"./img/meetingGroundLogo.png\";\nimport React from \"react\"; // yarn add react-hook-form\n//You have to use the link component to link between you pages\n\nimport { useMutation } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport { useQuery } from \"@apollo/react-hooks\";\nconst LogoCard = styled.img`\n  width: 450px;\n  height: 100px;\n  justify-content: space-around;\n  float: left;\n`;\nconst TopFormat = styled.div`\n  margin: 0 auto;\n  width: 100%;\n  overflow: auto;\n  display: inline-block;\n  background: white;\n  border-radius: 25px;\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 10px;\n`;\nconst MainBodyFormat = styled.div`\n  margin: 0 auto;\n  align-items: center;\n  background: white;\n  display: flex;\n  flex-direction: column;\n  height: 650px;\n  border-radius: 25px;\n`;\nconst Inputformat = styled.input`\n  width: 100%;\n  padding: 10px 20px;\n  margin: 8px 0;\n  display: inline-block;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n`;\nconst MainErrorBodyFormat = styled.div`\n  margin: 0 auto;\n  align-items: center;\n  justify-content: center;\n  background: white;\n  display: flex;\n  flex-direction: column;\n  height: 650px;\n  border-radius: 25px;\n`;\nconst meetingInfo = {\n  hostEmail: \"\",\n  duration: 0\n};\nconst urlId = {\n  urlid: \"\"\n};\nconst createEvent = gql`\n  mutation(\n    $url: String!\n    $email: String!\n    $username: String!\n    $comment: String!\n    $startTime: String!\n  ) {\n    create_event(\n      url: $url\n      email: $email\n      username: $username\n      comment: $comment\n      startTime: $startTime\n    ) {\n      state\n    }\n  }\n`;\nconst GET_UNIQUE_LINK = gql`\n  query($url: String) {\n    link_url(url: $url) {\n      url\n      duration\n      used\n    }\n  }\n`;\n\nconst SubmitInfoPage = props => {\n  const id = props.match.params.id; //link id\n\n  const scheduledDate = new Date(props.match.params.time.replace(\"%20\", \"\"));\n  urlId.urlid = id;\n  const [mutate] = useMutation(createEvent);\n  const {\n    register,\n    handleSubmit\n  } = useForm({\n    defaultValues: {\n      firstName: \"\",\n      lastName: \"\",\n      email: \"\",\n      comments: \"\"\n    }\n  });\n  const clientEmail = {\n    email: \"\"\n  };\n\n  async function inviteTo(data) {\n    let myComment = data.comment !== undefined ? data.comment : \" \";\n    const arg = await mutate({\n      variables: {\n        url: urlId.urlid,\n        email: data.email,\n        username: data.firstName + \" \" + data.lastName,\n        comment: myComment,\n        startTime: scheduledDate.toString()\n      }\n    });\n  }\n\n  const onSubmit = data => {\n    console.log(data);\n    console.log(data.firstName);\n    console.log(data.email);\n    clientEmail.email = data.email;\n\n    if (!/^[a-zA-Z0-9]+[a-zA-Z0-9_.]*@[a-zA-Z0-9]+.[A-Za-z]+$/.test(data.email)) {\n      window.alert(\"invalid email\");\n    } else {\n      inviteTo(data);\n      props.history.push(\"/confirmation\");\n    }\n  };\n\n  const {\n    loading,\n    error,\n    data\n  } = useQuery(GET_UNIQUE_LINK, {\n    variables: {\n      url: urlId.urlid\n    }\n  });\n  return loading ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 5\n    }\n  }, \"loading\") : error ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 5\n    }\n  }, \"An Error occurred: \", error) : /*#__PURE__*/React.createElement(\"body\", {\n    style: {\n      background: \"rgba(131, 196, 197)\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: \"1rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TopFormat, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(LogoCard, {\n    id: \"logo\",\n    src: logo,\n    alt: \"Meeting Ground Logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      justifyContent: \"center\",\n      alignContent: \"center\",\n      display: \"flex\",\n      flexDirection: \"row\",\n      borderTop: \"5px solid grey\",\n      margin: 5\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    style: {\n      margin: 0,\n      justifyContent: \"center\",\n      top: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 13\n    }\n  }, \"Submit Info Page\"))), !data.link_url.used && /*#__PURE__*/React.createElement(MainBodyFormat, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    style: {\n      margin: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 13\n    }\n  }, \" \", \"Your scheduled date is \", scheduledDate.toString()), /*#__PURE__*/React.createElement(\"h4\", {\n    style: {\n      margin: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 13\n    }\n  }, \" \", \"Please input your information below to confirm your meeting.\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      flexDirection: \"row\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"firstName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 17\n    }\n  }, \"First Name\", /*#__PURE__*/React.createElement(Inputformat, {\n    name: \"firstName\",\n    id: \"firstName\",\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"lastName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 17\n    }\n  }, \"Last Name\", /*#__PURE__*/React.createElement(Inputformat, {\n    name: \"lastName\",\n    id: \"lastName\",\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 17\n    }\n  }, \"Email Address\"), /*#__PURE__*/React.createElement(Inputformat, {\n    name: \"email\",\n    id: \"email\",\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"comments\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 17\n    }\n  }, \"Comments/Questions?\"), /*#__PURE__*/React.createElement(Inputformat, {\n    name: \"comments\",\n    id: \"comments\",\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    style: {\n      display: \"flex\",\n      flexDirection: \"column\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 17\n    }\n  }, \"Submit Info\")))), data.link_url.used && /*#__PURE__*/React.createElement(MainErrorBodyFormat, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    style: {\n      top: 10,\n      margin: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 13\n    }\n  }, \"Sorry! Link has been used! \\uD83D\\uDE22\"))));\n};\n\nexport default SubmitInfoPage;","map":{"version":3,"sources":["/Users/kimberlyzhu/Documents/MeetingGround/src/pages/submitInfo.tsx"],"names":["useForm","styled","logo","React","useMutation","gql","useQuery","LogoCard","img","TopFormat","div","MainBodyFormat","Inputformat","input","MainErrorBodyFormat","meetingInfo","hostEmail","duration","urlId","urlid","createEvent","GET_UNIQUE_LINK","SubmitInfoPage","props","id","match","params","scheduledDate","Date","time","replace","mutate","register","handleSubmit","defaultValues","firstName","lastName","email","comments","clientEmail","inviteTo","data","myComment","comment","undefined","arg","variables","url","username","startTime","toString","onSubmit","console","log","test","window","alert","history","push","loading","error","background","padding","justifyContent","alignContent","display","flexDirection","borderTop","margin","top","link_url","used"],"mappings":"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","sourcesContent":["/*users.jsx*/\nimport useForm from \"react-hook-form\";\nimport { RouteComponentProps } from \"react-router-dom\";\n//You have to use the link component to link between you pages\nimport styled from \"@emotion/styled\";\nimport logo from \"./img/meetingGroundLogo.png\";\nimport React, { useState } from \"react\";\n// yarn add react-hook-form\n//You have to use the link component to link between you pages\nimport { useMutation } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport { useQuery } from \"@apollo/react-hooks\";\n\ninterface SubmitPagePropsInterface\n  extends RouteComponentProps<{ id: string; time: string }> {\n  // Other props that belong to component it self not Router\n}\nconst LogoCard = styled.img`\n  width: 450px;\n  height: 100px;\n  justify-content: space-around;\n  float: left;\n`;\n\nconst TopFormat = styled.div`\n  margin: 0 auto;\n  width: 100%;\n  overflow: auto;\n  display: inline-block;\n  background: white;\n  border-radius: 25px;\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 10px;\n`;\n\nconst MainBodyFormat = styled.div`\n  margin: 0 auto;\n  align-items: center;\n  background: white;\n  display: flex;\n  flex-direction: column;\n  height: 650px;\n  border-radius: 25px;\n`;\n\nconst Inputformat = styled.input`\n  width: 100%;\n  padding: 10px 20px;\n  margin: 8px 0;\n  display: inline-block;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n`;\n\nconst MainErrorBodyFormat = styled.div`\n  margin: 0 auto;\n  align-items: center;\n  justify-content: center;\n  background: white;\n  display: flex;\n  flex-direction: column;\n  height: 650px;\n  border-radius: 25px;\n`;\n\nconst meetingInfo: {\n  hostEmail: string;\n  duration: number;\n} = {\n  hostEmail: \"\",\n  duration: 0,\n};\n\nconst urlId: {\n  urlid: string;\n} = {\n  urlid: \"\",\n};\nconst createEvent = gql`\n  mutation(\n    $url: String!\n    $email: String!\n    $username: String!\n    $comment: String!\n    $startTime: String!\n  ) {\n    create_event(\n      url: $url\n      email: $email\n      username: $username\n      comment: $comment\n      startTime: $startTime\n    ) {\n      state\n    }\n  }\n`;\n\nconst GET_UNIQUE_LINK = gql`\n  query($url: String) {\n    link_url(url: $url) {\n      url\n      duration\n      used\n    }\n  }\n`;\n\nconst SubmitInfoPage: React.FC<SubmitPagePropsInterface> = (\n  props: SubmitPagePropsInterface\n) => {\n  const id = props.match.params.id; //link id\n  const scheduledDate = new Date(props.match.params.time.replace(\"%20\", \"\"));\n  urlId.urlid = id;\n\n  const [mutate] = useMutation(createEvent);\n\n  const { register, handleSubmit } = useForm({\n    defaultValues: {\n      firstName: \"\",\n      lastName: \"\",\n      email: \"\",\n      comments: \"\",\n    },\n  });\n\n  const clientEmail: {\n    email: string;\n  } = {\n    email: \"\",\n  };\n\n  async function inviteTo(data: any) {\n    let myComment = data.comment !== undefined ? data.comment : \" \";\n    const arg = await mutate({\n      variables: {\n        url: urlId.urlid,\n        email: data.email,\n        username: data.firstName + \" \" + data.lastName,\n        comment: myComment,\n        startTime: scheduledDate.toString(),\n      },\n    });\n  }\n\n  const onSubmit = (data: any) => {\n    console.log(data);\n    console.log(data.firstName);\n    console.log(data.email);\n    clientEmail.email = data.email;\n    if (\n      !/^[a-zA-Z0-9]+[a-zA-Z0-9_.]*@[a-zA-Z0-9]+.[A-Za-z]+$/.test(data.email)\n    ) {\n      window.alert(\"invalid email\");\n    } else {\n      inviteTo(data);\n      props.history.push(\"/confirmation\");\n    }\n  };\n\n  const { loading, error, data } = useQuery(GET_UNIQUE_LINK, {\n    variables: { url: urlId.urlid },\n  });\n\n  return loading ? (\n    <div>loading</div>\n  ) : error ? (\n    <div>An Error occurred: {error}</div>\n  ) : (\n    <body style={{ background: \"rgba(131, 196, 197)\" }}>\n      <div style={{ padding: \"1rem\" }}>\n        <TopFormat>\n          <LogoCard id=\"logo\" src={logo} alt=\"Meeting Ground Logo\" />\n\n          <div\n            style={{\n              justifyContent: \"center\",\n              alignContent: \"center\",\n              display: \"flex\",\n              flexDirection: \"row\",\n              borderTop: \"5px solid grey\",\n              margin: 5,\n            }}\n          >\n            <h1\n              style={{\n                margin: 0,\n                justifyContent: \"center\",\n                top: 20,\n              }}\n            >\n              Submit Info Page\n            </h1>\n          </div>\n        </TopFormat>\n        {!data.link_url.used && (\n          <MainBodyFormat>\n            <h3 style={{ margin: 20 }}>\n              {\" \"}\n              Your scheduled date is {scheduledDate.toString()}\n            </h3>\n            <h4 style={{ margin: 20 }}>\n              {\" \"}\n              Please input your information below to confirm your meeting.\n            </h4>\n            <form onSubmit={handleSubmit(onSubmit)}>\n              <div style={{ display: \"flex\", flexDirection: \"row\" }}>\n                <label htmlFor=\"firstName\">\n                  First Name\n                  <Inputformat name=\"firstName\" id=\"firstName\" ref={register} />\n                </label>\n\n                <label htmlFor=\"lastName\">\n                  Last Name\n                  <Inputformat name=\"lastName\" id=\"lastName\" ref={register} />\n                </label>\n              </div>\n\n              <div>\n                <label htmlFor=\"email\">Email Address</label>\n                <Inputformat name=\"email\" id=\"email\" ref={register} />\n              </div>\n\n              <div>\n                <label htmlFor=\"comments\">Comments/Questions?</label>\n                <Inputformat name=\"comments\" id=\"comments\" ref={register} />\n              </div>\n\n              <div\n                className=\"form-group\"\n                style={{ display: \"flex\", flexDirection: \"column\" }}\n              >\n                <button type=\"submit\" className=\"btn btn-primary\">\n                  Submit Info\n                </button>\n              </div>\n            </form>\n          </MainBodyFormat>\n        )}\n\n        {data.link_url.used && (\n          <MainErrorBodyFormat>\n            <h1 style={{ top: 10, margin: 20 }}>\n              Sorry! Link has been used! ðŸ˜¢\n            </h1>\n          </MainErrorBodyFormat>\n        )}\n        {/* <pre id=\"content\"></pre> */}\n      </div>\n    </body>\n  );\n};\n\nexport default SubmitInfoPage;\n"]},"metadata":{},"sourceType":"module"}