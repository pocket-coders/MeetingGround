{"ast":null,"code":"\"use strict\";\n\nvar __makeTemplateObject = this && this.__makeTemplateObject || function (cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nexports.__esModule = true;\n\nvar react_1 = require(\"react\");\n\nvar apiGoogleconfig_json_1 = require(\"../apiGoogleconfig.json\");\n\nvar moment_1 = require(\"moment\");\n\nvar Moment_1 = require(\"../pages/Moment\");\n\nvar styled_1 = require(\"@emotion/styled\");\n\nrequire(\"react-big-calendar/lib/css/react-big-calendar.css\");\n\nvar client_1 = require(\"@apollo/client\"); //yarn add @types/gapi\n//yarn add @types/gapi.auth2\n//yarn add @types/gapi.client.calendar\n\n\nvar append_host_to_db = client_1.gql(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  mutation addHost(\\n    $fname: String!\\n    $lname: String!\\n    $email: String!\\n    $GOA_code: String!\\n  ) {\\n    addHost(Fname: $fname, Lname: $lname, email: $email, GOA_code: $GOA_code) {\\n      Lname\\n      email\\n    }\\n  }\\n\"], [\"\\n  mutation addHost(\\n    $fname: String!\\n    $lname: String!\\n    $email: String!\\n    $GOA_code: String!\\n  ) {\\n    addHost(Fname: $fname, Lname: $lname, email: $email, GOA_code: $GOA_code) {\\n      Lname\\n      email\\n    }\\n  }\\n\"])));\n\nvar ConnectPage = function () {\n  var _a = react_1.useState(false),\n      isSigned = _a[0],\n      setIsSigned = _a[1];\n\n  var _b = react_1.useState(\"\"),\n      name = _b[0],\n      setName = _b[1];\n\n  var _c = react_1.useState(\"\"),\n      picUrl = _c[0],\n      setPicUrl = _c[1];\n\n  var _d = react_1.useState(\"\"),\n      email = _d[0],\n      setEmail = _d[1];\n\n  var _e = react_1.useState(\"\"),\n      fname = _e[0],\n      setFname = _e[1];\n\n  var _f = react_1.useState(\"\"),\n      lname = _f[0],\n      setLname = _f[1];\n\n  var _g = react_1.useState(\"\"),\n      message = _g[0],\n      setMessage = _g[1];\n\n  var _h = react_1.useState([]),\n      myEvents = _h[0],\n      setMyEvents = _h[1];\n\n  var _j = react_1.useState(\"\"),\n      authorizeButton = _j[0],\n      setAuthorizeButton = _j[1];\n\n  var _k = react_1.useState(\"\"),\n      signoutButton = _k[0],\n      setSignoutButton = _k[1];\n\n  var mutate = client_1.useMutation(append_host_to_db)[0];\n  /**\n   *  On load, called to load the auth2 library and API client library.\n   */\n\n  react_1.useEffect(function () {\n    gapi.load(\"client:auth2\", initClient);\n  }, []); // --> [] call the function only one time at the beginning\n  // function handleClientLoad() {\n  //   gapi.load(\"client:auth2\", initClient);\n  // }\n\n  /**\n   *  Initializes the API client library and sets up sign-in state\n   *  listeners.\n   */\n\n  function initClient() {\n    gapi.client.init({\n      apiKey: apiGoogleconfig_json_1.config.apiKey,\n      clientId: apiGoogleconfig_json_1.config.clientId,\n      discoveryDocs: apiGoogleconfig_json_1.config.discoveryDocs,\n      scope: apiGoogleconfig_json_1.config.scope\n    }).then(function () {\n      // Listen for sign-in state changes.\n      gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus); // Handle the initial sign-in state.\n\n      updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get()); //authorizeButton.onclick = handleAuthClick;\n      //signoutButton.onclick = handleSignoutClick;\n    }, function (error) {\n      // setMessage(JSON.stringify(error, null, 2));\n      // const temp: string = JSON.stringify(error, null, 2);\n      // message += temp;\n      appendPre(JSON.stringify(error, null, 2));\n    });\n  }\n  /**\n   *  Sign in the user upon button click.\n   */\n\n\n  function handleAuthClick(event) {\n    // Granting access when the user is offline\n    gapi.auth2.getAuthInstance().grantOfflineAccess().then(function (response) {\n      gapi.auth2.getAuthInstance().signIn();\n\n      if (response.code) {\n        // Hide the sign-in button now that the user is authorized, for example:\n        setAuthorizeButton(\"none\"); //$(\"#signinButton\").attr(\"style\", \"display: none\");\n\n        console.log(response);\n        addHostToDB(response, fname, lname, email);\n        console.log(\"After host added/found\");\n      } else {\n        console.log(\"THERE WAS AN ERROR\");\n      }\n    }); //gapi.auth2.getAuthInstance().signIn();\n  } //checks if host already exists using func, if not, add host\n\n\n  function addHostToDB(response, fname, lname, email) {\n    return __awaiter(this, void 0, void 0, function () {\n      var arg;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , mutate({\n              variables: {\n                GOA_code: response,\n                fname: fname,\n                lname: lname,\n                email: email\n              }\n            })];\n\n          case 1:\n            arg = _a.sent();\n            console.log(arg);\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  }\n  /**\n   *  Sign out the user upon button click.\n   */\n\n\n  function handleSignoutClick(event) {\n    gapi.auth2.getAuthInstance().signOut();\n  } //calendar.settings.readonly scope allowed\n\n  /**\n   *  Called when the signed in status changes, to update the UI\n   *  appropriately. After a sign-in, the API is called.\n   */\n\n\n  function updateSigninStatus(isSignedIn) {\n    if (isSignedIn) {\n      setAuthorizeButton(\"none\");\n      setSignoutButton(\"block\");\n      setIsSigned(true);\n      setName(gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile().getName());\n      setFname(gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile().getGivenName());\n      setLname(gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile().getFamilyName());\n      setEmail(gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile().getEmail());\n      setPicUrl(gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile().getImageUrl());\n      listUpcomingEvents();\n      console.log(\"SIGNED IN\");\n    } else {\n      console.log(\"SIGNED OUT\");\n      setIsSigned(false);\n      setName(\"\");\n      setPicUrl(\"\");\n      setFname(\"\");\n      setLname(\"\");\n      setEmail(\"\");\n      setAuthorizeButton(\"block\");\n      setSignoutButton(\"none\");\n    }\n  } // /**\n  //  * Append a pre element to the body containing the given message\n  //  * as its text node. Used to display the results of the API call.\n  //  *\n  //  * @param {string} message Text to be placed in pre element.\n  //  */\n\n\n  function appendPre(message) {\n    var pre = document.getElementById(\"content\");\n    var textContent = document.createTextNode(message + \"\\n\");\n    pre.appendChild(textContent);\n  }\n\n  var CalendarCard = styled_1[\"default\"].div(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n    margin: 0 auto;\\n    width: 1000px;\\n    height: 1000px;\\n    align-items: center;\\n    border-radius: 15px;\\n  \"], [\"\\n    margin: 0 auto;\\n    width: 1000px;\\n    height: 1000px;\\n    align-items: center;\\n    border-radius: 15px;\\n  \"])));\n  /**\n   * Print the summary and start datetime/date of the next ten events in\n   * the authorized user's calendar. If no events are found an\n   * appropriate message is printed.\n   */\n\n  function listUpcomingEvents() {\n    gapi.client.calendar.events.list({\n      calendarId: \"primary\",\n      timeMin: new Date().toISOString(),\n      showDeleted: false,\n      singleEvents: true,\n      maxResults: 10,\n      orderBy: \"startTime\"\n    }).then(function (response) {\n      var events = response.result.items;\n      var appointments = response.result.items;\n\n      for (var j = 0; j < appointments.length; j++) {\n        appointments[j].start = moment_1[\"default\"].utc(appointments[j].start.dateTime).toDate();\n        appointments[j].end = moment_1[\"default\"].utc(appointments[j].end.dateTime).toDate();\n      }\n\n      setMyEvents(appointments); //setMyEvents(events);\n      // debugger;\n\n      var tmp = message;\n      setMessage(tmp + \"Upcoming events:\" + \"\\n\"); // message += \"Upcoming events:\" + \"\\n\";\n\n      appendPre(\"Upcoming events:\");\n      console.log(events.length);\n\n      if (events.length > 0) {\n        var i = void 0;\n\n        for (i = 0; i < events.length; i++) {\n          var event_1 = events[i];\n          var when = event_1.start.dateTime;\n\n          if (!when) {\n            when = event_1.start.date;\n          }\n\n          var temp = message + event_1.summary + \" (\" + when + \")\" + \"\\n\";\n          setMessage(temp); // message += temp;\n\n          appendPre(event_1.summary + \" (\" + when + \")\");\n        }\n      } else {\n        setMessage(\"No upcoming events found.\" + \"\\n\"); // message += \"No upcoming events found.\" + \"\\n\";\n\n        appendPre(\"No upcoming events found.\");\n      }\n    });\n  } // handleClientLoad();\n\n\n  return react_1[\"default\"].createElement(\"div\", {\n    style: {\n      padding: \"1rem\"\n    }\n  }, react_1[\"default\"].createElement(\"div\", null, react_1[\"default\"].createElement(\"img\", {\n    id: \"logo\",\n    src: \"./logo.png\",\n    alt: \"Meeting Ground Logo\"\n  }), react_1[\"default\"].createElement(\"h1\", null, \"Welcome to Meeting Ground\"), react_1[\"default\"].createElement(\"h2\", null, \"Where Meetings hit the Ground\"), react_1[\"default\"].createElement(\"small\", null, \"Main Page\")), react_1[\"default\"].createElement(\"div\", null, react_1[\"default\"].createElement(\"button\", {\n    id: \"authorize_button\",\n    onClick: handleAuthClick,\n    style: {\n      display: authorizeButton\n    }\n  }, \"Sign in\"), react_1[\"default\"].createElement(\"button\", {\n    id: \"signout_button\",\n    onClick: handleSignoutClick,\n    style: {\n      display: signoutButton\n    }\n  }, \"Sign Out\")), isSigned && react_1[\"default\"].createElement(\"div\", null, react_1[\"default\"].createElement(\"div\", null, react_1[\"default\"].createElement(\"h1\", null, \"Welcome \", name), react_1[\"default\"].createElement(\"img\", {\n    src: picUrl,\n    alt: \"Avatar.\"\n  }), react_1[\"default\"].createElement(\"p\", null, react_1[\"default\"].createElement(\"a\", {\n    id: \"continue\",\n    href: \"http://localhost:3000/home\"\n  }, \"continue to Meeting Ground\"))), react_1[\"default\"].createElement(\"pre\", {\n    id: \"content\"\n  }), react_1[\"default\"].createElement(CalendarCard, null, react_1[\"default\"].createElement(Moment_1[\"default\"], {\n    myList: myEvents\n  }))));\n};\n\nexports[\"default\"] = ConnectPage;\nvar templateObject_1, templateObject_2;","map":{"version":3,"sources":["/Users/talbachar/Desktop/MeetingGround/src/calendar/connect.js"],"names":["__makeTemplateObject","cooked","raw","Object","defineProperty","value","__awaiter","thisArg","_arguments","P","generator","adopt","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","_","label","sent","t","trys","ops","f","y","g","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","exports","__esModule","react_1","require","apiGoogleconfig_json_1","moment_1","Moment_1","styled_1","client_1","append_host_to_db","gql","templateObject_1","ConnectPage","_a","useState","isSigned","setIsSigned","_b","name","setName","_c","picUrl","setPicUrl","_d","email","setEmail","_e","fname","setFname","_f","lname","setLname","_g","message","setMessage","_h","myEvents","setMyEvents","_j","authorizeButton","setAuthorizeButton","_k","signoutButton","setSignoutButton","mutate","useMutation","useEffect","gapi","load","initClient","client","init","apiKey","config","clientId","discoveryDocs","scope","auth2","getAuthInstance","isSignedIn","listen","updateSigninStatus","get","error","appendPre","JSON","stringify","handleAuthClick","event","grantOfflineAccess","response","signIn","code","console","log","addHostToDB","arg","variables","GOA_code","handleSignoutClick","signOut","currentUser","getBasicProfile","getName","getGivenName","getFamilyName","getEmail","getImageUrl","listUpcomingEvents","pre","document","getElementById","textContent","createTextNode","appendChild","CalendarCard","div","templateObject_2","calendar","events","list","calendarId","timeMin","Date","toISOString","showDeleted","singleEvents","maxResults","orderBy","items","appointments","j","start","utc","dateTime","toDate","end","tmp","i","event_1","when","date","temp","summary","createElement","style","padding","id","src","alt","onClick","display","href","myList"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nvar react_1 = require(\"react\");\nvar apiGoogleconfig_json_1 = require(\"../apiGoogleconfig.json\");\nvar moment_1 = require(\"moment\");\nvar Moment_1 = require(\"../pages/Moment\");\nvar styled_1 = require(\"@emotion/styled\");\nrequire(\"react-big-calendar/lib/css/react-big-calendar.css\");\nvar client_1 = require(\"@apollo/client\");\n//yarn add @types/gapi\n//yarn add @types/gapi.auth2\n//yarn add @types/gapi.client.calendar\nvar append_host_to_db = client_1.gql(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  mutation addHost(\\n    $fname: String!\\n    $lname: String!\\n    $email: String!\\n    $GOA_code: String!\\n  ) {\\n    addHost(Fname: $fname, Lname: $lname, email: $email, GOA_code: $GOA_code) {\\n      Lname\\n      email\\n    }\\n  }\\n\"], [\"\\n  mutation addHost(\\n    $fname: String!\\n    $lname: String!\\n    $email: String!\\n    $GOA_code: String!\\n  ) {\\n    addHost(Fname: $fname, Lname: $lname, email: $email, GOA_code: $GOA_code) {\\n      Lname\\n      email\\n    }\\n  }\\n\"])));\nvar ConnectPage = function () {\n    var _a = react_1.useState(false), isSigned = _a[0], setIsSigned = _a[1];\n    var _b = react_1.useState(\"\"), name = _b[0], setName = _b[1];\n    var _c = react_1.useState(\"\"), picUrl = _c[0], setPicUrl = _c[1];\n    var _d = react_1.useState(\"\"), email = _d[0], setEmail = _d[1];\n    var _e = react_1.useState(\"\"), fname = _e[0], setFname = _e[1];\n    var _f = react_1.useState(\"\"), lname = _f[0], setLname = _f[1];\n    var _g = react_1.useState(\"\"), message = _g[0], setMessage = _g[1];\n    var _h = react_1.useState([]), myEvents = _h[0], setMyEvents = _h[1];\n    var _j = react_1.useState(\"\"), authorizeButton = _j[0], setAuthorizeButton = _j[1];\n    var _k = react_1.useState(\"\"), signoutButton = _k[0], setSignoutButton = _k[1];\n    var mutate = client_1.useMutation(append_host_to_db)[0];\n    /**\n     *  On load, called to load the auth2 library and API client library.\n     */\n    react_1.useEffect(function () {\n        gapi.load(\"client:auth2\", initClient);\n    }, []);\n    // --> [] call the function only one time at the beginning\n    // function handleClientLoad() {\n    //   gapi.load(\"client:auth2\", initClient);\n    // }\n    /**\n     *  Initializes the API client library and sets up sign-in state\n     *  listeners.\n     */\n    function initClient() {\n        gapi.client\n            .init({\n            apiKey: apiGoogleconfig_json_1.config.apiKey,\n            clientId: apiGoogleconfig_json_1.config.clientId,\n            discoveryDocs: apiGoogleconfig_json_1.config.discoveryDocs,\n            scope: apiGoogleconfig_json_1.config.scope\n        })\n            .then(function () {\n            // Listen for sign-in state changes.\n            gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);\n            // Handle the initial sign-in state.\n            updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());\n            //authorizeButton.onclick = handleAuthClick;\n            //signoutButton.onclick = handleSignoutClick;\n        }, function (error) {\n            // setMessage(JSON.stringify(error, null, 2));\n            // const temp: string = JSON.stringify(error, null, 2);\n            // message += temp;\n            appendPre(JSON.stringify(error, null, 2));\n        });\n    }\n    /**\n     *  Sign in the user upon button click.\n     */\n    function handleAuthClick(event) {\n        // Granting access when the user is offline\n        gapi.auth2\n            .getAuthInstance()\n            .grantOfflineAccess()\n            .then(function (response) {\n            gapi.auth2.getAuthInstance().signIn();\n            if (response.code) {\n                // Hide the sign-in button now that the user is authorized, for example:\n                setAuthorizeButton(\"none\");\n                //$(\"#signinButton\").attr(\"style\", \"display: none\");\n                console.log(response);\n                addHostToDB(response, fname, lname, email);\n                console.log(\"After host added/found\");\n            }\n            else {\n                console.log(\"THERE WAS AN ERROR\");\n            }\n        });\n        //gapi.auth2.getAuthInstance().signIn();\n    }\n    //checks if host already exists using func, if not, add host\n    function addHostToDB(response, fname, lname, email) {\n        return __awaiter(this, void 0, void 0, function () {\n            var arg;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, mutate({\n                            variables: { GOA_code: response, fname: fname, lname: lname, email: email }\n                        })];\n                    case 1:\n                        arg = _a.sent();\n                        console.log(arg);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    }\n    /**\n     *  Sign out the user upon button click.\n     */\n    function handleSignoutClick(event) {\n        gapi.auth2.getAuthInstance().signOut();\n    }\n    //calendar.settings.readonly scope allowed\n    /**\n     *  Called when the signed in status changes, to update the UI\n     *  appropriately. After a sign-in, the API is called.\n     */\n    function updateSigninStatus(isSignedIn) {\n        if (isSignedIn) {\n            setAuthorizeButton(\"none\");\n            setSignoutButton(\"block\");\n            setIsSigned(true);\n            setName(gapi.auth2\n                .getAuthInstance()\n                .currentUser.get()\n                .getBasicProfile()\n                .getName());\n            setFname(gapi.auth2\n                .getAuthInstance()\n                .currentUser.get()\n                .getBasicProfile()\n                .getGivenName());\n            setLname(gapi.auth2\n                .getAuthInstance()\n                .currentUser.get()\n                .getBasicProfile()\n                .getFamilyName());\n            setEmail(gapi.auth2\n                .getAuthInstance()\n                .currentUser.get()\n                .getBasicProfile()\n                .getEmail());\n            setPicUrl(gapi.auth2\n                .getAuthInstance()\n                .currentUser.get()\n                .getBasicProfile()\n                .getImageUrl());\n            listUpcomingEvents();\n            console.log(\"SIGNED IN\");\n        }\n        else {\n            console.log(\"SIGNED OUT\");\n            setIsSigned(false);\n            setName(\"\");\n            setPicUrl(\"\");\n            setFname(\"\");\n            setLname(\"\");\n            setEmail(\"\");\n            setAuthorizeButton(\"block\");\n            setSignoutButton(\"none\");\n        }\n    }\n    // /**\n    //  * Append a pre element to the body containing the given message\n    //  * as its text node. Used to display the results of the API call.\n    //  *\n    //  * @param {string} message Text to be placed in pre element.\n    //  */\n    function appendPre(message) {\n        var pre = document.getElementById(\"content\");\n        var textContent = document.createTextNode(message + \"\\n\");\n        pre.appendChild(textContent);\n    }\n    var CalendarCard = styled_1[\"default\"].div(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n    margin: 0 auto;\\n    width: 1000px;\\n    height: 1000px;\\n    align-items: center;\\n    border-radius: 15px;\\n  \"], [\"\\n    margin: 0 auto;\\n    width: 1000px;\\n    height: 1000px;\\n    align-items: center;\\n    border-radius: 15px;\\n  \"])));\n    /**\n     * Print the summary and start datetime/date of the next ten events in\n     * the authorized user's calendar. If no events are found an\n     * appropriate message is printed.\n     */\n    function listUpcomingEvents() {\n        gapi.client.calendar.events\n            .list({\n            calendarId: \"primary\",\n            timeMin: new Date().toISOString(),\n            showDeleted: false,\n            singleEvents: true,\n            maxResults: 10,\n            orderBy: \"startTime\"\n        })\n            .then(function (response) {\n            var events = response.result.items;\n            var appointments = response.result.items;\n            for (var j = 0; j < appointments.length; j++) {\n                appointments[j].start = moment_1[\"default\"]\n                    .utc(appointments[j].start.dateTime)\n                    .toDate();\n                appointments[j].end = moment_1[\"default\"]\n                    .utc(appointments[j].end.dateTime)\n                    .toDate();\n            }\n            setMyEvents(appointments);\n            //setMyEvents(events);\n            // debugger;\n            var tmp = message;\n            setMessage(tmp + \"Upcoming events:\" + \"\\n\");\n            // message += \"Upcoming events:\" + \"\\n\";\n            appendPre(\"Upcoming events:\");\n            console.log(events.length);\n            if (events.length > 0) {\n                var i = void 0;\n                for (i = 0; i < events.length; i++) {\n                    var event_1 = events[i];\n                    var when = event_1.start.dateTime;\n                    if (!when) {\n                        when = event_1.start.date;\n                    }\n                    var temp = message + event_1.summary + \" (\" + when + \")\" + \"\\n\";\n                    setMessage(temp);\n                    // message += temp;\n                    appendPre(event_1.summary + \" (\" + when + \")\");\n                }\n            }\n            else {\n                setMessage(\"No upcoming events found.\" + \"\\n\");\n                // message += \"No upcoming events found.\" + \"\\n\";\n                appendPre(\"No upcoming events found.\");\n            }\n        });\n    }\n    // handleClientLoad();\n    return (react_1[\"default\"].createElement(\"div\", { style: { padding: \"1rem\" } },\n        react_1[\"default\"].createElement(\"div\", null,\n            react_1[\"default\"].createElement(\"img\", { id: \"logo\", src: \"./logo.png\", alt: \"Meeting Ground Logo\" }),\n            react_1[\"default\"].createElement(\"h1\", null, \"Welcome to Meeting Ground\"),\n            react_1[\"default\"].createElement(\"h2\", null, \"Where Meetings hit the Ground\"),\n            react_1[\"default\"].createElement(\"small\", null, \"Main Page\")),\n        react_1[\"default\"].createElement(\"div\", null,\n            react_1[\"default\"].createElement(\"button\", { id: \"authorize_button\", onClick: handleAuthClick, style: { display: authorizeButton } }, \"Sign in\"),\n            react_1[\"default\"].createElement(\"button\", { id: \"signout_button\", onClick: handleSignoutClick, style: { display: signoutButton } }, \"Sign Out\")),\n        isSigned && (react_1[\"default\"].createElement(\"div\", null,\n            react_1[\"default\"].createElement(\"div\", null,\n                react_1[\"default\"].createElement(\"h1\", null,\n                    \"Welcome \",\n                    name),\n                react_1[\"default\"].createElement(\"img\", { src: picUrl, alt: \"Avatar.\" }),\n                react_1[\"default\"].createElement(\"p\", null,\n                    react_1[\"default\"].createElement(\"a\", { id: \"continue\", href: \"http://localhost:3000/home\" }, \"continue to Meeting Ground\"))),\n            react_1[\"default\"].createElement(\"pre\", { id: \"content\" }),\n            react_1[\"default\"].createElement(CalendarCard, null,\n                react_1[\"default\"].createElement(Moment_1[\"default\"], { myList: myEvents }))))));\n};\nexports[\"default\"] = ConnectPage;\nvar templateObject_1, templateObject_2;\n"]},"metadata":{},"sourceType":"module"}